<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Aitsam Motors</title>

    <style>
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: #f7f7f7;
        }
        
        header {
            background: #111;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 28px;
            position: relative;
        }
        
        #adminBtn {
            position: absolute;
            right: 15px;
            top: 15px;
            background: #444;
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
        }
        /* SLIDER */
        
        .slider {
            width: 100%;
            height: 210px;
            overflow: hidden;
            position: relative;
        }
        
        .slider img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            opacity: 0;
            transition: 1s;
        }
        
        .slider img.active {
            opacity: 1;
        }
        /* Search */
        
        #search {
            width: 80%;
            max-width: 450px;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #bbb;
            display: block;
            margin: 15px auto;
        }
        /* Section Titles */
        
        h2 {
            margin-left: 15px;
        }
        /* Car Rows */
        
        .row {
            display: flex;
            gap: 18px;
            overflow-x: auto;
            padding: 15px;
            scrollbar-width: none;
        }
        
        .row::-webkit-scrollbar {
            display: none;
        }
        /* Card */
        
        .card {
            min-width: 260px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, .18);
            cursor: pointer;
            transition: .3s
        }
        
        .card:hover {
            transform: translateY(-4px);
        }
        
        .card img {
            width: 100%;
            height: 170px;
            border-radius: 12px 12px 0 0;
            object-fit: cover;
        }
        
        .meta {
            padding: 12px;
        }
        
        .meta h3 {
            margin: 0;
            font-size: 18px;
        }
        
        .meta p {
            margin: 4px 0;
            color: #0f7f00;
            font-weight: 600;
        }
        
        .soldTag {
            background: red;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
            margin-top: 6px;
        }
        /* Admin Panel */
        
        #panel {
            display: none;
            background: white;
            margin: 20px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, .25);
        }
        
        #panel input,
        #panel textarea {
            width: 100%;
            padding: 8px;
            margin-top: 8px;
            border-radius: 6px;
            border: 1px solid #888;
        }
        
        #panel button {
            margin-top: 10px;
            padding: 8px 14px;
            border: none;
            background: #111;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .manageItem {
            border-bottom: 1px solid #ddd;
            padding: 6px 0;
        }
        /* Modal */
        
        #modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, .75);
            justify-content: center;
            align-items: center;
        }
        
        #modalBox {
            background: white;
            width: 350px;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }
        
        #modalImg {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .galleryBtn {
            background: black;
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            margin: 4px;
            cursor: pointer;
        }
        /* Footer */
        
        footer {
            background: #111;
            color: white;
            text-align: center;
            padding: 15px;
            margin-top: 40px;
        }
        
        footer a {
            color: white;
            margin: 0 10px;
            text-decoration: none;
            font-size: 18px;
        }
    </style>
</head>

<body>

    <header>
        Aitsam Motors
        <button id="adminBtn" onclick="login()">Admin</button>
    </header>

    <!-- IMAGE SLIDER -->
    <div class="slider">
        <img src="https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg" class="active">
        <img src="https://images.pexels.com/photos/305070/pexels-photo-305070.jpeg">
        <img src="https://images.pexels.com/photos/210019/pexels-photo-210019.jpeg">
    </div>

    <script>
        let s = 0;
        setInterval(() => {
            let imgs = document.querySelectorAll(".slider img");
            imgs[s].classList.remove("active");
            s = (s + 1) % imgs.length;
            imgs[s].classList.add("active");
        }, 3500);
    </script>

    <input id="search" placeholder="Search Car..." oninput="renderAll()">

    <h2>Available Cars</h2>
    <div class="row" id="avail"></div>

    <h2>Sold Cars</h2>
    <div class="row" id="sold"></div>

    <!-- Admin Panel -->
    <div id="panel">
        <h2>Add Car</h2>
        <input id="c_name" placeholder="Car Name">
        <input id="c_price" placeholder="Price (PKR)">
        <textarea id="c_desc" placeholder="Description"></textarea>
        <textarea id="c_specs" placeholder="Specifications (comma separated)"></textarea>
        <input id="c_imgs" type="file" multiple accept="image/*">
        <button onclick="addCar()">Add Car</button>

        <h2>Manage Cars</h2>
        <div id="manageList"></div>
    </div>

    <!-- Car Modal -->
    <div id="modal" onclick="closeCar()">
        <div id="modalBox" onclick="event.stopPropagation()">
            <h3 id="m_name"></h3>
            <img id="modalImg">
            <p id="m_price"></p>
            <p id="m_desc"></p>
            <div id="m_specs" style="text-align:left;"></div>
            <button class="galleryBtn" onclick="prevImg()">◄</button>
            <button class="galleryBtn" onclick="nextImg()">►</button>
        </div>
    </div>

    <footer>
        <a href="https://wa.me/923001234567">WhatsApp</a>
        <a href="https://facebook.com/example">Facebook</a>
        <a href="https://tiktok.com/@example">TikTok</a>
        <a href="tel:+923001234567">Call</a>
    </footer>

    <script>
        let cars = JSON.parse(localStorage.getItem("cars") || "[]");
        let isAdmin = false,
            currentCar = null,
            galleryIndex = 0;

        const AV = document.getElementById("avail");
        const SD = document.getElementById("sold");
        const PN = document.getElementById("panel");
        const ML = document.getElementById("manageList");

        function save() {
            localStorage.setItem("cars", JSON.stringify(cars));
        }

        function login() {
            let p = prompt("Enter Admin Password:");
            if (p === "aitsam123") {
                isAdmin = true;
                PN.style.display = "block";
                renderAll();
            } else alert("Wrong Password");
        }

        function addCar() {
            let n = c_name.value.trim(),
                pr = c_price.value.trim(),
                d = c_desc.value.trim();
            let specs = c_specs.value.trim() ? c_specs.value.split(",").map(x => x.trim()) : [];
            let files = c_imgs.files;
            if (!n || !pr || files.length == 0) return alert("Fill all fields & pick images!");

            let car = {
                id: Date.now(),
                name: n,
                price: pr,
                desc: d,
                specs,
                imgs: [],
                sold: false
            };
            let done = 0;
            for (let f of files) {
                let r = new FileReader();
                r.onload = e => {
                    car.imgs.push(e.target.result);
                    done++;
                    if (done === files.length) {
                        cars.push(car);
                        save();
                        renderAll();
                        alert("Car Added ✅");
                    }
                };
                r.readAsDataURL(f);
            }
            c_name.value = c_price.value = c_desc.value = c_specs.value = "";
            c_imgs.value = "";
        }

        function toggleSold(id) {
            let c = cars.find(x => x.id == id);
            c.sold = !c.sold;
            save();
            renderAll();
        }

        function delCar(id) {
            if (confirm("Delete Car?")) {
                cars = cars.filter(x => x.id != id);
                save();
                renderAll();
            }
        }

        function renderAll() {
            let q = search.value.toLowerCase();
            AV.innerHTML = "";
            SD.innerHTML = "";
            ML.innerHTML = "";

            cars.forEach(c => {
                if (!c.name.toLowerCase().includes(q)) return;

                let card = `<div class="card" onclick="openCar(${c.id})">
<img src="${c.imgs[0]}"><div class="meta"><h3>${c.name}</h3><p>${c.price}</p>${c.sold?'<div class="soldTag">SOLD</div>':''}</div></div>`;

                (c.sold ? SD : AV).innerHTML += card;

                if (isAdmin) ML.innerHTML += `<div class="manageItem">${c.name} - ${c.price}
<button onclick="toggleSold(${c.id})">${c.sold?'Mark Available':'Mark Sold'}</button>
<button onclick="delCar(${c.id})" style="background:red;color:white;">Delete</button></div>`;
            });
        }

        renderAll();

        function openCar(id) {
            currentCar = cars.find(c => c.id == id);
            galleryIndex = 0;
            show();
            modal.style.display = "flex";
        }

        function closeCar() {
            modal.style.display = "none";
        }

        function show() {
            modalImg.src = currentCar.imgs[galleryIndex];
            m_name.textContent = currentCar.name;
            m_price.textContent = currentCar.price;
            m_desc.textContent = currentCar.desc;
            m_specs.innerHTML = currentCar.specs.map(s => "• " + s).join("<br>");
        }

        function nextImg() {
            galleryIndex = (galleryIndex + 1) % currentCar.imgs.length;
            show();
        }

        function prevImg() {
            galleryIndex = (galleryIndex - 1 + currentCar.imgs.length) % currentCar.imgs.length;
            show();
        }
    </script>
</body>

</html>
